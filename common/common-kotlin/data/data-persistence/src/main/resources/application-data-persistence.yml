datasources:
  default:
    url: ${DATASOURCE_URL:`jdbc:postgresql://localhost:5432/bizkinetics`}
    username: ${DATASOURCE_USERNAME:postgres}
    password: ${DATASOURCE_PASSWORD:password}
    driver-class-name: org.postgresql.Driver
    dialect: POSTGRES
    schema-generate: NONE
    schema-generate-names: false

jpa:
  default:
    packages-to-scan:
      - 'net.blugrid'
    database: POSTGRESQL
    driverClassName: org.postgresql.Driver
    dialect: POSTGRES
    generate-ddl: false
    hibernate.ddl-auto: validate
    properties:
      hibernate:
        default_schema: ${env.db.schema}
        proc.param_null_passing: true
        show_sql: false
        format_sql: false
        jdbc:
          time_zone: UTC

flyway:
  datasources:
    default:
      enabled: true
      locations: classpath:db/migration,classpath:net/blugrid/api
      default-schema: ${env.db.schema}
      table: _${env.db.schema}_schema_version
      username: ${POSTGRES_USERNAME_1:postgres}
      password: ${POSTGRES_PASSWORD_1:password}
      out-of-order: true
      placeholder-prefix: $$$
      placeholder-suffix: $$$
      placeholders:
        schema: ${env.db.schema}

micronaut:
  multitenancy:
    tenantresolver:
      httpheader:
        header-name: tenantId
        enabled: true
